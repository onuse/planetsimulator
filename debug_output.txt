Starting Octree Planet Simulator...
Camera constructor: altitude=29000, near=10, far=2.9e+06
Octree Planet Simulator (C++ Version)
=====================================
Radius: 6.371e+06 meters
Max Depth: 10
Seed: 42
Resolution: 1280x720
Auto-terminate: 2 seconds
Starting initialization...
=== INIT FUNCTION CALLED ===
Generating planet...
Generating sphere structure...
Planet radius: 6.371e+06 meters
Root node half-size: 9.5565e+06 meters
Setting materials for leaf at depth 4 center=(-2.98641e+06,-4.18097e+06,-5.37553e+06) size=597281
    Node center=(-2.98641e+06,-4.18097e+06,-5.37553e+06) halfSize=597281
    Voxel offset=(-298641,-298641,-298641)
    Voxel pos=(-3.28505e+06,-4.47961e+06,-5.67417e+06) dist=7.9407e+06
    Planet radius=6.371e+06
Setting materials for leaf at depth 4 center=(-4.18097e+06,-2.98641e+06,-5.37553e+06) size=597281
    Node center=(-4.18097e+06,-2.98641e+06,-5.37553e+06) halfSize=597281
    Voxel offset=(-298641,-298641,-298641)
    Voxel pos=(-4.47961e+06,-3.28505e+06,-5.67417e+06) dist=7.9407e+06
    Planet radius=6.371e+06
Setting materials for leaf at depth 5 center=(-3.28505e+06,-3.28505e+06,-5.67417e+06) size=298641
    Node center=(-3.28505e+06,-3.28505e+06,-5.67417e+06) halfSize=298641
    Voxel offset=(-149320,-149320,-149320)
    Voxel pos=(-3.43437e+06,-3.43437e+06,-5.82349e+06) dist=7.58306e+06
    Planet radius=6.371e+06
Setting materials for leaf at depth 5 center=(-2.68777e+06,-3.28505e+06,-5.67417e+06) size=298641
Setting materials for leaf at depth 5 center=(-3.28505e+06,-2.68777e+06,-5.67417e+06) size=298641
Setting materials for leaf at depth 6 center=(-2.83709e+06,-2.83709e+06,-5.82349e+06) size=149320
Setting materials for leaf at depth 6 center=(-2.53845e+06,-2.83709e+06,-5.82349e+06) size=149320
Setting materials for leaf at depth 6 center=(-2.83709e+06,-2.53845e+06,-5.82349e+06) size=149320
Setting materials for leaf at depth 6 center=(-2.53845e+06,-2.53845e+06,-5.82349e+06) size=149320
Setting materials for leaf at depth 6 center=(-2.83709e+06,-2.83709e+06,-5.52485e+06) size=149320
  Continent value range: [0.294055, 0.355255]
Generated 5939984 leaf nodes (3502856 with surface material)
Planet generation complete (simplified)
Planet generated successfully
Initializing Vulkan renderer...
Hierarchical GPU octree rendering enabled
Found NVIDIA GPU: NVIDIA GeForce RTX 3070 Laptop GPU
Selected GPU: NVIDIA GeForce RTX 3070 Laptop GPU
Creating material table buffer...
Material table buffer created with 512 bytes
Creating Transvoxel triangle mesh pipeline...
Creating triangle mesh pipeline...
Loaded triangle shaders: vert=2604 bytes, frag=7456 bytes
Created shader modules successfully
Pipeline creation returned: 0, handle: 0x253f4954e90
Triangle mesh pipeline created, handle=0x253f4954e90
Transvoxel pipeline created successfully
Creating Transvoxel descriptor sets...
Transvoxel descriptor sets created successfully
Creating Quadtree LOD pipeline...
Loaded quadtree shaders: vert=8524 bytes, frag=4156 bytes
Quadtree pipeline created successfully
Creating Quadtree descriptor sets...
Quadtree descriptor sets created successfully
Vulkan renderer initialized successfully
Camera set to test position at 10km altitude (broken rendering with 2000+ patches)
=== CALLING autoAdjustClipPlanes with altitude=9999.5 ===
=== DONE CALLING autoAdjustClipPlanes ===
Camera positioned at: (3.65198e+06, 2.16741e+06, 4.76262e+06)
Near plane: 1, Far plane: 100000
Initialization complete, entering main loop...
Entering render loop...
DEBUG: Starting main loop, auto-terminate=2, screenshot-interval=0
DEBUG: Frame 0, elapsed=7.5e-06s, shouldExit=0
[LODManager] Initializing with planet radius: 6.371e+06, seed: 42
[SphericalQuadtree] Creating with planet radius: 6.371e+06
Generating sphere structure...
Planet radius: 6.371e+06 meters
Root node half-size: 9.5565e+06 meters
Generated 5939984 leaf nodes (3502856 with surface material)
Planet generation complete (simplified)
[LODManager] Initialization complete. Created base mesh with 4096 vertices and 23814 indices
[LODManager] Altitude: 10000m, Mode: QUADTREE
[SphericalQuadtree::update] ViewPos: 6.381e+06, Roots: 6
[SphericalQuadtree] Subdivision limit reached (50 per frame)
[LODManager] Reallocating instance buffer: Required: 153 patches (26928 bytes), Allocating: 1000 patches (176000 bytes)
[VulkanRenderer] Instance buffer updated, descriptor sets refreshed
DEBUG: Camera matrices on first frame (double precision):
  Camera position: (3.65198e+06, 2.16741e+06, 4.76262e+06)
  ViewProj[0]: 0.773143, 0.357992, -0.572333, -0.572321
  ViewProj[1]: 0, -1.62907, -0.339673, -0.339666
  ViewProj[2]: -0.592848, 0.466864, -0.74639, -0.746375
  ViewProj[3]: -0.24357, 0.433013, 6.38113e+06, 6.381e+06
  Test vertex (4.47058e+06, 4.53487e+06, 14112) -> (3.44803e+06, -5.78062e+06, 2.27156e+06, w=2.27152e+06)
  After perspective divide: (1.51794, -2.54483, 1.00002)
[RENDER DEBUG] At minimum altitude: 10000m, Patches: 153, Mode: 0
[LODManager::render] Mode: 0, Instances: 153, Indices: 23814, Altitude: 10000m
DEBUG: Frame 1, elapsed=2.3019s, shouldExit=0
Auto-terminating after 2.3019 seconds
